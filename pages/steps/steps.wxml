<view class="container">
  <!-- æ­¥éª¤å¯¼èˆªæ  -->
  <view class="step-navbar">
    <text class="nav-title">åˆ¶ä½œæ­¥éª¤</text>
    <text class="step-count">å…±{{steps.length}}æ­¥</text>
  </view>

  <!-- è¿›åº¦æ¡ -->
  <view class="progress-section">
    <view class="progress-bar">
      <view class="progress-fill" style="width: {{currentProgress}}%"></view>
    </view>
    <text class="progress-text">{{currentStep}}/{{steps.length}}</text>
  </view>

  <!-- æ­¥éª¤åˆ—è¡¨ -->
  <view class="steps-list">
    <block wx:for="{{steps}}" wx:key="number">
      <view class="step-card {{item.animation}}" style="animation-delay: {{index * 0.1}}s">
        <!-- æ—¶é—´çº¿è¿æ¥çº¿ -->
        <view class="timeline-connector" wx:if="{{index < steps.length - 1}}"></view>
        
        <!-- æ­¥éª¤å†…å®¹ -->
        <view class="step-content">
          <!-- å·¦ä¾§æ­¥éª¤ç¼–å· -->
          <view class="step-number-container">
            <view class="step-number {{index < currentStep ? 'completed' : ''}}">
              <text wx:if="{{index < currentStep}}" class="check-icon">âœ“</text>
              <text wx:else>{{item.number}}</text>
            </view>
          </view>
          
          <!-- å³ä¾§å†…å®¹åŒº -->
          <view class="step-details">
            <view class="step-header">
              <text class="step-title">æ­¥éª¤ {{item.number}}</text>
              <text class="step-status {{index < currentStep ? 'completed' : index === currentStep ? 'active' : 'pending'}}">
                {{index < currentStep ? 'å·²å®Œæˆ' : index === currentStep ? 'è¿›è¡Œä¸­' : 'å¾…å®Œæˆ'}}
              </text>
            </view>
            
            <!-- æ­¥éª¤è¯´æ˜ -->
            <view class="step-instruction-container">
              <text class="step-instruction">{{item.instruction}}</text>
              
              <!-- é¢å¤–æç¤º -->
              <view class="step-tips" wx:if="{{item.tips}}">
                <text class="tips-icon">ğŸ’¡</text>
                <text class="tips-text">{{item.tips}}</text>
              </view>
              
              <!-- é¢„è®¡æ—¶é—´ -->
              <view class="step-time" wx:if="{{item.estimatedTime}}">
                <text class="time-icon">â±ï¸</text>
                <text class="time-text">é¢„è®¡ {{item.estimatedTime}} åˆ†é’Ÿ</text>
              </view>
            </view>
            
            <!-- æ­¥éª¤æ“ä½œæŒ‰é’® -->
            <view class="step-actions" wx:if="{{index === currentStep}}">
              <button class="step-complete-btn" bindtap="completeStep" data-step="{{index}}">
                å®Œæˆæ­¤æ­¥éª¤
              </button>
            </view>
          </view>
        </view>
      </view>
    </block>
    
    <!-- å®Œæˆæç¤º -->
    <view class="completion-card" wx:if="{{currentStep >= steps.length}}">
      <view class="completion-icon">ğŸ‰</view>
      <text class="completion-title">æ­å–œå®Œæˆï¼</text>
      <text class="completion-message">æ‚¨çš„é¸¡å°¾é…’å·²ç»åˆ¶ä½œå®Œæˆï¼Œè¯·äº«ç”¨ç¾å‘³ï¼</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-action-bar">
    <button 
      class="complete-button {{currentStep >= steps.length ? 'all-complete' : ''}}" 
      bindtap="finishCocktail"
    >
      {{currentStep >= steps.length ? 'è¿”å›é¦–é¡µ' : 'è·³è¿‡å‰©ä½™æ­¥éª¤'}}
    </button>
  </view>
</view>
